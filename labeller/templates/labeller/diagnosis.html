{% extends 'labeller/base2.html' %}
{% load static %}

{% block title %}Diagnoses{% endblock %}

<script>

</script>

{% block content %}

<script src="{% static 'labeller/Cell.js' %}"></script>
<script src="{% static 'labeller/CellCounter.js' %}"></script>
<script src="{% static 'labeller/Slide.js' %}"></script>


<h2>Diagnosis: {{diagnosis.name}}</h2>

<!-- Cell Summary -->
<div class="container-fluid justify-content-center slide_box">
  <div class="container-fluid m-2 py-4">
    {% include "labeller/partials/cell_summary2.html" %}
    <script>$('#slide_info_diagnosis_pk_{{diagnosis.pk}}').text('Open cell summary for all slides with {{diagnosis.name}}')</script>
  </div>
</div>

<!-- Slides -->
<h2>Slides ({{slides|length}})</h2>

{% for slide in slides %}
<div class="container-fluid justify-content-center slide_box">
  <div class="container-fluid m-2 py-4">
    <div class='d-flex flex-row align-middle'>
      <div class='p-2'>
        ID: {{slide.id}}
      </div>
      <div class='p-2'>
        SID: {{slide.sid}}
      </div>
      <div class='p-2'>
        Name: {{slide.name}}
      </div>
      <a href="/label_slide/{{slide.sid}}/" class="slide_label_btn p-2">Label</a>
    </div>

    <div class="flex-row" id='slide_cellSummary_sid_{{slide.sid}}'></div>
    
    <script>
        var cellSummary = new CellSummary('sid', {{slide.sid}});
        $('#slide_cellSummary_sid_{{slide.sid}}').append(cellSummary.getNewULForSlide());
        cellSummary.addInfoButtonOnClick();
        $('#bigtable_sid_{{slide.sid}}').hide()
    </script>
  </div>
</div>

  {% empty %}
    <p id="no_slide">No Slides</p>
  {% endfor %}


<!-- Cells -->
<h2>Cells ({{cells|length}})</h2>
{%   include "labeller/partials/main_lineages_horizontal.html" %}
</div>

{% endblock %}