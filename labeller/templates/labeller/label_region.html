{% extends "labeller/base.html" %}
{% load static %}

{% block title %}Label Region{% endblock %}

{% block content %}
<script src="{% static 'labeller/Cell.js' %}"></script>
<script src="{% static 'labeller/CellCounter.js' %}"></script>


<div id='labeller'>

	{% include "labeller/partials/region_annotator.html" %}

	<div id="column2_wrapper">

		{% include "labeller/partials/mini_counter.html" %}

		{% include "labeller/partials/dot_legend.html" %}

		{% include "labeller/partials/current_cell.html" %}

	</div>


</div>
{% include "labeller/partials/big_table.html" %}




<div id="test_keyboard">Last Key Pressed: </div>
<p id="additional_instructions">Press left and right arrows to change cell</p>
<p id="additional_instructions">Click on cell to select it, or to create a new cell</p>

{% include "labeller/partials/main_lineages_horizontal.html" %}

<img id="helpscreen" style="display:none;" src="{% static 'labeller/images/Reference_maturation.png' %}" />


{% endblock content %}

{% block scripts %} 



<script type="text/javascript">
	var cells_json = [];
	var current_cell_cid = '-1';
	if ('{{cells_json}}'!='none') {
		
	 	cells_json = '{{cells_json}}';
			
//		Initialize current cell
		{% with cells.0 as current_cell %}
			console.log("current cell is", '{{current_cell}}');
			current_cell_cid = {{current_cell.cid}};
		{% endwith %}
	
	}
	// cells_json = '{{cells_json}}';
	console.log(current_cell_cid);
	console.log("cells_json:", cells_json);


	var region_img_url = '{{region.image.url}}';
	console.log('region image path = ', region_img_url)
	var region_rid = '{{region.rid}}';


	var static_image_path = "{% static 'labeller/images/' %}";
	console.log("static", static_image_path);
</script>

<script src="{% static 'labeller/label_region.js' %}"></script>

{% endblock scripts %}